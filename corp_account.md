# 프로젝트 지시서: 국내 증권사 법인 계좌개설 서류 판정 시스템 구축

## 1. 프로젝트 목적

국내 증권사 영업점/센터 직원이 법인 계좌 개설 업무를 처리할 때,
직원 개인 판단에 의존하지 않고 **입력값 기반으로 케이스를 자동 분류**하여
**필요 서류 패키지, 예외 케이스, 승인 필요 여부, 접수 가능/불가 상태**를 한 번에 판정하는 내부 업무용 프로그램을 개발한다.

이 시스템의 최우선 목표는 다음 4가지다.

1. **재방문 최소화**

   * 접수 전에 필요한 서류를 정확히 안내하고 누락을 줄인다.

2. **직원 임의 판단 제거**

   * 케이스 판정과 서류 요구를 룰 엔진이 수행한다.

3. **예외 케이스 자동 식별**

   * 고위험/복잡 케이스는 자동으로 심사 또는 승인 라인으로 보낸다.

4. **감사 가능성 확보**

   * 어떤 입력값 때문에 어떤 서류가 요구되었는지, 누가 언제 어떤 판단을 했는지 로그를 남긴다.

---

## 2. 핵심 원칙

### 2.1 절대 하드코딩 금지

법인 계좌개설 서류 규정, 상품별 추가서류, 예외승인 조건은 바뀔 수 있으므로
**서류 매핑 로직과 예외 규칙은 코드에 하드코딩하지 말고 설정 테이블/룰 테이블로 분리**한다.

### 2.2 “서류 중심”이 아니라 “케이스 중심”

직원은 서류를 외우지 않는다.
시스템은 입력값으로 먼저 **케이스 코드**를 결정하고,
그 케이스 코드에 따라 **기본서류 + 추가서류 + 예외승인 필요 여부**를 자동 생성한다.

### 2.3 현장은 판정 장소가 아니라 확인 장소

이 시스템은 “고객이 왔을 때 직원이 고민하는 구조”가 아니라
**사전 입력 → 케이스 확정 → 서류 리스트 생성 → 사전 검토 → 현장 원본 확인** 구조를 지원해야 한다.

### 2.4 규정상 민감 구간은 자동 차단

다음과 같은 경우는 단순 경고가 아니라 **다음 단계 진행 자체를 막는 block rule**로 설계한다.

* 사업자 상태 불량(휴업/폐업 등)
* 고객유형 미확정
* 대표자/대리인 여부 미확정
* 실제소유자 확인 불가
* 필수 서류 누락
* 외국법인/고위험 플래그인데 승인자 미배정
* 공동대표 권한 확인 불충분
* 상품별 추가 적합성/위험고지 절차 누락

---

## 3. 추천 기술 스택

기본 권장 스택은 아래와 같다.

* **Frontend**: Next.js + TypeScript
* **Backend API**: Next.js Route Handlers 또는 NestJS
* **DB**: PostgreSQL
* **ORM**: Prisma
* **Rule Engine 표현 방식**: JSON/YAML + DB 테이블
* **Auth**: 사내 SSO 연동 가능 구조
* **Audit Log**: immutable append-only log table
* **File Handling**: 첨부파일 메타데이터 저장 + 스토리지 추상화
* **Deployment**: 사내망/사설 클라우드 대응 가능한 구조

Python을 선호한다면 대안으로 아래도 허용한다.

* **Frontend**: Next.js
* **Backend**: FastAPI
* **DB**: PostgreSQL
* **Rule Engine**: Pydantic models + JSON rules

단, 어느 스택을 선택하든 **룰 엔진/문서 유형/케이스 유형은 설정화**해야 한다.

---

## 4. 시스템 범위

### 4.1 포함 범위

* 법인 계좌개설 사전 판정
* 케이스 자동 분류
* 필요 서류 자동 산출
* 예외 케이스 자동 감지
* 접수 가능/보완 필요/승인 필요/접수 불가 판정
* 직원용 체크리스트 출력
* 관리자용 룰 관리 화면
* 감사 로그
* 케이스별 판정 사유 설명

### 4.2 제외 범위

* 실제 증권 계좌 개설 실행 코어 시스템 연계
* OCR 정교화
* eKYC 생체인증
* 대외기관 실시간 API 연계
* 내부 전산 전체 워크플로우 자동화
  (단, 추후 연계 가능한 인터페이스는 열어둘 것)

---

## 5. 핵심 사용자

1. **영업점/센터 담당 직원**

   * 고객 정보 입력
   * 케이스 분류 확인
   * 서류 안내/접수
   * 누락 보완 요청

2. **심사/승인 담당자**

   * 예외 케이스 검토
   * 승인/반려
   * 예외 사유 기록

3. **운영 관리자**

   * 룰 수정
   * 문서 유형 추가/비활성화
   * 상품별 추가서류 설정
   * 리포트 확인

4. **준법/AML 담당자**

   * 예외 조건, 위험 플래그, 실제소유자 확인 로직 검토
   * 정책 버전 관리

---

## 6. 입력 데이터 모델

다음 입력값을 기본으로 받는다.

### 6.1 고객 기본 식별

* 사업자등록번호
* 법인명
* 고객 구분 코드
* 국내/해외 여부
* 법인 설립일
* 사업 상태(계속, 휴업, 폐업, 확인불가)
* 업종
* 법인 주소

### 6.2 고객유형

다음 중 하나로 분류한다.

* `FOR_PROFIT_CORP_DOMESTIC` : 국내 영리법인
* `NON_PROFIT_CORP` : 비영리법인
* `NON_CORPORATE_ORG` : 법인격 없는 단체/임의단체
* `FOREIGN_CORP` : 외국법인
* `FOREIGN_ORG` : 외국단체
* `SOLE_PROPRIETOR` : 개인사업자
  ※ 초기 버전 범위에서 제외할 경우 feature flag로 분리

### 6.3 계좌유형

* `BROKERAGE_GENERAL` : 일반 위탁/종합
* `CMA_SETTLEMENT` : CMA/입출금성
* `FOREIGN_SECURITIES` : 해외주식/외화 관련
* `DERIVATIVES` : 선물/옵션/파생
* `BOND_REPO` : 채권/RP 등
* `OTHER_PRODUCT` : 기타 상품성 계좌

### 6.4 내점/신청자 유형

* `REPRESENTATIVE_SELF` : 대표자 본인 내점
* `INTERNAL_EMPLOYEE_PROXY` : 법인 소속 임직원 대리
* `EXTERNAL_PROXY` : 외부 대리인/수임인
* `JOINT_REP_SINGLE_ACTION_ALLOWED` : 공동대표 중 단독 가능
* `JOINT_REP_JOINT_ACTION_REQUIRED` : 공동대표 공동행사 필요
* `NON_FACE_TO_FACE_REQUEST` : 비대면 사전접수

### 6.5 실제소유자/지배구조 관련

* 실제소유자 확인 가능 여부
* 실제소유자 확인 방식
* 지분구조 단순/복잡 여부
* 2단계 이상 소유구조 여부
* 최종 지배자 불명 여부

### 6.6 거래 목적/자금 성격

* 계좌 개설 목적
* 예상 거래 상품
* 예상 자금원천/거래규모
* 영업목적/운영자금/투자목적 등

### 6.7 위험 플래그

* 외국법인 여부
* 고위험 국가 관련 여부
* PEP/제재/특수관계 검토 필요 여부
* 신설법인 여부
* 휴면/비정상 사업징후
* 서류 불일치 여부
* 대표권/대리권 불명확 여부

---

## 7. 케이스 체계

다음 케이스 코드를 기본 제공한다.
코드는 예시이며 DB에 저장 가능한 마스터 코드 형태로 구현한다.

### 7.1 기본 케이스

#### C01

* 국내 영리법인
* 대표자 본인 내점
* 일반 위탁/종합 계좌
* 실제소유자 확인 가능
* 고위험 아님

#### C02

* 국내 영리법인
* 법인 임직원 대리 내점
* 일반 위탁/종합 계좌
* 실제소유자 확인 가능
* 고위험 아님

#### C03

* 국내 영리법인
* 외부 대리인 내점
* 일반 위탁/종합 계좌

#### C04

* 국내 영리법인
* 공동대표
* 단독 대표권 행사 가능

#### C05

* 국내 영리법인
* 공동대표
* 공동 행사 필요

#### C06

* 국내 비영리법인
* 대표자 본인 내점

#### C07

* 국내 비영리법인
* 대리인 내점

#### C08

* 법인격 없는 단체/임의단체
* 대표자 또는 관리책임자 신청

#### C09

* 외국법인
* 국내 지점/사무소 포함

#### C10

* 신설법인
* 사업 개시 초기
* 일반 사업실적 부족

#### C11

* 실제소유자 확인 곤란
* 다단계 지배구조 또는 복잡한 지분구조

#### C12

* 고위험 플래그 존재
* 해외/고위험 국가/특수심사 필요

#### C13

* 일반 계좌 외 상품 추가
* 예: 해외주식/외화, 파생, 채권 등 부가 상품 포함

#### C14

* 비대면 사전접수 후 대면 확인 예정

### 7.2 복합 케이스

복합 케이스를 지원해야 한다.
예를 들어 아래는 단일 코드가 아니라 **기본 케이스 + 추가 태그**로 표현 가능해야 한다.

* C02 + `NEW_CORP`
* C02 + `FOREIGN_RELATED`
* C05 + `UBO_COMPLEX`
* C06 + `HIGH_RISK`
* C01 + `FOREIGN_SECURITIES_PRODUCT`
* C03 + `DOCUMENT_MISMATCH`

즉, 아키텍처는 **단일 case_code만이 아니라 case tags 조합**도 지원해야 한다.

---

## 8. 서류 유형 마스터

모든 서류는 `DocumentType` 마스터 테이블로 관리한다.

### 8.1 공통 기본서류

* `DOC_BUSINESS_REGISTRATION` : 사업자등록증
* `DOC_CORPORATE_REGISTRY` : 법인 등기사항전부증명서/법인 존재 증빙
* `DOC_ACCOUNT_OPENING_FORM` : 계좌개설 신청서
* `DOC_CUSTOMER_DUE_DILIGENCE_FORM` : 고객확인서/법인 기본정보서
* `DOC_REPRESENTATIVE_ID` : 대표자 실명확인증표
* `DOC_CORPORATE_SEAL_OR_SIGNATURE` : 거래 인감/서명 정보
* `DOC_CONTACT_INFO_VERIFICATION` : 연락처/주소 확인 자료

### 8.2 대리/권한 관련 서류

* `DOC_PROXY_ID` : 대리인 신분증
* `DOC_POWER_OF_ATTORNEY` : 위임장
* `DOC_CORPORATE_SEAL_CERTIFICATE` : 법인 인감증명서
* `DOC_USE_OF_SEAL_FORM` : 사용인감계
* `DOC_EMPLOYMENT_CERTIFICATE` : 재직증명서
* `DOC_AUTHORIZATION_PROOF` : 대리권/권한 확인 서류
* `DOC_BOARD_RESOLUTION` : 이사회 의사록/결의서
* `DOC_JOINT_REP_AUTH_PROOF` : 공동대표 권한 행사 확인서류

### 8.3 실제소유자/지배구조 관련

* `DOC_SHAREHOLDER_REGISTER` : 주주명부
* `DOC_MEMBER_REGISTER` : 사원명부/출자자명부
* `DOC_BENEFICIAL_OWNER_DECLARATION` : 실제소유자 확인서/신고서
* `DOC_OWNERSHIP_STRUCTURE_CHART` : 지배구조도
* `DOC_ARTICLES_OF_INCORPORATION` : 정관
* `DOC_BYLAWS_OR_RULES` : 규약/회칙
* `DOC_CONTROL_PERSON_EXPLANATION` : 사실상 지배자 소명자료

### 8.4 거래 목적/자금원천 관련

* `DOC_TRANSACTION_PURPOSE_FORM` : 금융거래 목적 확인서
* `DOC_SOURCE_OF_FUNDS_EXPLANATION` : 자금원천 설명서
* `DOC_FINANCIAL_STATEMENT` : 재무제표
* `DOC_TAX_INVOICE_OR_CONTRACT` : 세금계산서/거래계약서
* `DOC_OFFICE_LEASE` : 사업장 임대차계약서
* `DOC_BUSINESS_WEBSITE_OR_PHOTO` : 홈페이지/간판/사업장 사진
* `DOC_STARTUP_SUPPORT_PROOF` : 창업지원기관 확인자료

### 8.5 해외/외국법인 관련

* `DOC_FOREIGN_INCORPORATION_CERT` : 외국법인 설립 증빙
* `DOC_FOREIGN_REGISTRY_EXTRACT` : 외국 등기/등록 증빙
* `DOC_NOTARIZATION_OR_APOSTILLE` : 공증/아포스티유/영사확인
* `DOC_PASSPORT_OR_FOREIGN_ID` : 외국 대표자/대리인 신분증
* `DOC_KOREAN_TRANSLATION` : 번역문
* `DOC_TAX_RESIDENCY_FORM` : 세무거주지/FATCA/CRS 관련 문서

### 8.6 상품별 추가서류

* `DOC_FOREIGN_SECURITIES_AGREEMENT`
* `DOC_DERIVATIVES_RISK_DISCLOSURE`
* `DOC_PRODUCT_SUITABILITY_FORM`
* `DOC_TRADING_AUTHORITY_FORM`
* `DOC_CMA_ADDITIONAL_TERMS`
* `DOC_OTHER_PRODUCT_SPECIFIC_FORM`

### 8.7 예외/심사 관련

* `DOC_EXCEPTION_REVIEW_MEMO`
* `DOC_COMPLIANCE_APPROVAL`
* `DOC_AML_REVIEW_NOTE`
* `DOC_REJECTION_REASON_RECORD`

---

## 9. 케이스별 서류 매핑

아래는 기본 매핑 예시다.
반드시 DB/설정 파일로 분리해 관리한다.

### C01 국내 영리법인 + 대표자 본인 + 일반계좌

**필수**

* 사업자등록증
* 법인 존재 증빙
* 대표자 신분증
* 계좌개설 신청서
* 고객확인서
* 거래 인감/서명 정보
* 실제소유자 확인서류
* 거래 목적 확인 자료

**조건부**

* 재무제표 또는 목적/자금원천 설명
* 주주명부 또는 지배구조도

### C02 국내 영리법인 + 임직원 대리

**필수**

* C01의 모든 필수서류
* 대리인 신분증
* 위임장
* 법인 인감증명서 또는 사용인감계
* 재직증명서 또는 임직원 확인 자료

### C03 국내 영리법인 + 외부 대리인

**필수**

* C02의 모든 필수서류
* 외부 대리권 소명자료
* 필요 시 별도 결의서/승인서

### C04 공동대표 + 단독 가능

**필수**

* C01 또는 C02 기본셋
* 공동대표 구조 확인서류
* 단독 대표권 행사 가능 여부 증빙

### C05 공동대표 + 공동 행사 필요

**필수**

* C01 또는 C02 기본셋
* 공동대표 전원의 권한 증빙
* 공동 서명/공동 날인 필요 여부 반영
* 부족 시 접수 차단

### C06 비영리법인

**필수**

* 사업자등록 관련 서류
* 법인 존재 증빙
* 대표자 또는 신청자 신분증
* 정관/규약
* 의사결정 구조 확인 자료
* 실제 지배/통제자 확인 자료
* 거래 목적 자료

### C07 비영리법인 + 대리인

**필수**

* C06 필수서류
* 대리인 신분증
* 위임장
* 인감증명/사용인감계
* 재직 또는 권한 증빙

### C08 법인격 없는 단체/임의단체

**필수**

* 단체 존재 증빙
* 고유번호증 또는 이에 준하는 등록자료
* 회칙/규약
* 대표자 또는 책임자 신분증
* 의사결정 및 권한 확인 자료
* 실제 통제자 확인 자료
* 거래 목적 자료

### C09 외국법인

**필수**

* 외국 설립 증빙
* 외국 등기/등록 증빙
* 대표자/대리인 신분증
* 번역문
* 공증/아포스티유/영사확인(정책에 따라)
* 국내 활동 관련 증빙
* 실제소유자 자료
* 세무거주지 관련 문서
* 거래 목적/자금원천 자료

**자동 상태**

* 기본적으로 `승인 필요` 또는 `심사 필요`

### C10 신설법인

**필수**

* 일반 기본서류
* 사업 목적 소명자료
* 사무실 임대차계약서 또는 사업장 증빙
* 홈페이지/간판/사업계획 관련 자료
* 창업지원기관 자료가 있으면 추가 가능

**주의**

* 매출/거래실적 부재를 이유로 무조건 불가 처리하지 말고
  대체 증빙 허용 구조로 구현

### C11 실제소유자 확인 곤란

**필수**

* 지배구조도
* 다단계 출자 구조 설명
* 사실상 지배자 확인 소명
* 추가 AML 심사 메모

**자동 상태**

* `승인 필요`
* 경우에 따라 `접수 보류`

### C12 고위험 플래그

**필수**

* 기본서류 일체
* 강화된 고객확인 관련 추가질문/소명자료
* AML 심사 메모
* 준법 승인 기록

**자동 상태**

* 일반 직원 단독 처리 금지
* 관리자/준법 승인 전 개설 금지

### C13 상품 추가

계좌 유형에 따라 아래 추가서류를 요구한다.

* 해외주식/외화: 해외상품 약정, 외화 관련 동의/안내
* 파생: 위험고지, 적합성/투자성향/권한 확인
* CMA: 추가 약관/결제성 계좌 관련 서류
* 기타: 상품 마스터에 정의된 추가 양식

### C14 비대면 사전접수

**필수**

* 기본 정보 선입력
* 사전 서류 업로드
* 현장 원본 대조 예약
* 최종 개설은 대면 검증 완료 후만 허용

---

## 10. 예외 케이스 정의

다음 예외 케이스를 명시적으로 처리하라.

### E01 사업자 상태 이상

* 휴업
* 폐업
* 상태 확인 불가
* 사업자번호 형식 오류

**처리**

* 즉시 접수 차단 또는 관리자 확인 대기

### E02 서류 간 정보 불일치

* 법인명 상이
* 대표자명 상이
* 주소 상이
* 사업자번호 불일치
* 인감/서명 불일치

**처리**

* 불일치 항목 명시
* 보완 전 접수 금지

### E03 공동대표 권한 불명확

* 단독 가능인지 공동인지 알 수 없음
* 일부 대표만 신청

**처리**

* 권한 확인 증빙 추가 요구
* 미확인 시 접수 차단

### E04 대리권 불명확

* 위임장 없음
* 재직증명 없음
* 외부 대리권 소명 부족

**처리**

* 접수 차단

### E05 실제소유자 미확인

* 주주구조가 너무 복잡
* 최종 지배자 특정 불가
* 선언서는 있으나 증빙 불충분

**처리**

* 심사필수
* 필요 시 접수 보류

### E06 신설법인 실체 확인 부족

* 사무실 없음
* 사업 목적/활동 증빙 없음
* 연락처/주소 신뢰도 낮음

**처리**

* 대체 증빙 요청
* 미보완 시 승인 불가

### E07 비영리/단체 문서 미비

* 정관/규약 없음
* 대표권/운영 구조 불명확

**처리**

* 접수 보류

### E08 외국법인 문서 형식 문제

* 번역문 부재
* 공증/아포스티유 요건 불충족
* 국내 활동 근거 미비

**처리**

* 심사필수

### E09 고위험 플래그

* 고위험 국가 연관
* 제재/PEP/특수심사 필요
* 자금원천 설명 불충분

**처리**

* 강화심사/준법 승인

### E10 상품별 추가절차 누락

* 파생 위험고지 누락
* 해외상품 약정 누락
* 적합성 문서 누락

**처리**

* 해당 상품 계좌 개설 불가

---

## 11. 룰 엔진 설계 요구사항

### 11.1 룰 구조

룰은 최소 아래 필드를 가져야 한다.

* rule_id
* rule_name
* enabled
* priority
* conditions
* required_documents
* optional_documents
* blocked_if_missing
* escalate_if_true
* output_case_tags
* output_status
* explanation_template
* policy_version
* valid_from
* valid_to

### 11.2 조건 표현 방식

조건은 JSON 규칙 또는 DSL로 구현한다.

예시:

```json
{
  "all": [
    {"field": "customer_type", "eq": "FOR_PROFIT_CORP_DOMESTIC"},
    {"field": "applicant_type", "eq": "INTERNAL_EMPLOYEE_PROXY"},
    {"field": "account_type", "eq": "BROKERAGE_GENERAL"}
  ]
}
```

### 11.3 출력 상태

* `READY_FOR_REVIEW`
* `NEEDS_SUPPLEMENT`
* `ESCALATION_REQUIRED`
* `BLOCKED`
* `APPROVAL_PENDING`
* `APPROVED_FOR_RECEPTION`

### 11.4 설명 가능성

시스템은 반드시 **왜 그 서류가 필요한지**를 설명해야 한다.

예:

* “대리인 신청이므로 위임장과 대리인 신분증이 추가로 필요합니다.”
* “공동대표 권한이 확인되지 않아 접수가 차단되었습니다.”
* “해외상품 신청으로 상품별 추가약정이 필요합니다.”

---

## 12. UI/UX 요구사항

### 12.1 직원용 화면

필수 화면은 다음과 같다.

1. **신규 판정 시작**
2. **기본정보 입력**
3. **고객유형/대표권/대리권 입력**
4. **계좌유형 선택**
5. **실제소유자/거래목적 입력**
6. **자동 판정 결과 화면**

   * 케이스 코드
   * 상태
   * 필수서류
   * 조건부서류
   * 예외/승인 필요 여부
   * 판정 사유
7. **체크리스트 출력**
8. **첨부서류 업로드 및 검토 요청**

### 12.2 관리자 화면

1. 문서유형 마스터 관리
2. 케이스 마스터 관리
3. 룰 관리
4. 정책 버전 관리
5. 예외 케이스 통계
6. 누락서류/반려사유 대시보드

### 12.3 UX 원칙

* 직원이 3분 내에 1차 판정 가능해야 한다.
* 문구는 법무 문장보다 실무 문장으로 표기한다.
* 필수와 조건부를 명확히 색상/배지로 구분한다.
* “다음 단계 진행 불가” 사유를 한 줄로 보여준다.
* 출력용 체크리스트는 고객 안내문으로도 쓸 수 있어야 한다.

---

## 13. 데이터베이스 설계 요구사항

최소 다음 테이블을 설계하라.

* `customers`
* `account_requests`
* `document_types`
* `case_types`
* `case_tags`
* `rules`
* `rule_versions`
* `required_document_mappings`
* `uploaded_documents`
* `review_tasks`
* `approval_tasks`
* `audit_logs`
* `users`
* `roles`
* `policy_versions`

각 테이블에는 생성/수정 시각, 생성자/수정자, 상태값을 포함한다.

---

## 14. 감사 로그 요구사항

아래 이벤트는 모두 로그로 남겨야 한다.

* 신규 케이스 생성
* 입력값 변경
* 자동 판정 결과 변경
* 룰 버전 변경
* 필수서류 변경
* 예외 케이스 발생
* 승인 요청/승인/반려
* 첨부문서 업로드/삭제
* 최종 접수 가능 상태 변경

로그에는 최소 아래를 포함한다.

* 누가
* 언제
* 무엇을
* 왜 바꿨는지
* 변경 전/후 값

---

## 15. 테스트 시나리오

최소 아래 테스트 케이스를 포함한다.

1. 영리법인 + 대표자 본인 + 일반계좌
2. 영리법인 + 임직원 대리
3. 영리법인 + 외부 대리
4. 공동대표 단독 가능
5. 공동대표 공동행사 필요
6. 비영리법인
7. 임의단체
8. 외국법인
9. 신설법인
10. 실제소유자 불명
11. 고위험 플래그 존재
12. 해외주식 상품 추가
13. 파생상품 추가
14. 사업자 상태 휴업
15. 사업자 상태 폐업
16. 위임장 누락
17. 인감증명 누락
18. 법인명 불일치
19. 대표자명 불일치
20. 공동대표 권한 불명
21. 비대면 사전접수 후 대면확인
22. 외국문서 번역문 누락
23. 신설법인 실체증빙 부족
24. 실제소유자 확인 문서 미흡
25. 상품추가 서류만 누락된 경우

---

## 16. 산출물 요구사항

반드시 아래 산출물을 만든다.

### 16.1 코드 산출물

* 실행 가능한 앱
* 룰 엔진
* 관리자 화면
* 샘플 데이터
* 테스트 코드
* 초기 seed

### 16.2 문서 산출물

* README
* 로컬 실행 방법
* 데이터 모델 설명서
* 룰 등록 방법
* 정책 버전 관리 방법
* 운영자 매뉴얼
* 직원용 1페이지 사용법

### 16.3 샘플 설정파일

다음을 예시로 제공한다.

* 문서유형 seed JSON
* 케이스유형 seed JSON
* 룰 정의 seed JSON
* 테스트용 더미 고객 데이터

---

## 17. 반드시 지켜야 할 개발 원칙

1. 정책 변경 가능성을 전제로 설계할 것
2. 룰/서류/케이스를 설정 데이터로 분리할 것
3. 예외 케이스를 먼저 설계할 것
4. 단순 추천이 아니라 **차단/승인 워크플로우**를 구현할 것
5. 결과를 사람이 이해할 수 있게 설명할 것
6. 입력 누락 상태를 허용하지 말 것
7. 나중에 사내 API 연계 가능한 구조로 만들 것
8. 초기 버전에서도 감사 로그는 반드시 구현할 것
9. “대체 가능 서류” 개념을 지원할 것
10. 정책 버전별 이력 조회가 가능해야 할 것

---

## 18. 대체 가능 서류 구조

실무상 한 종류의 서류만 정답인 경우가 아니므로, 아래 개념을 지원하라.

예:

* 법인 인감증명서 **또는** 사용인감계 + 관련 증빙
* 주주명부 **또는** 출자자명부
* 재무제표 **또는** 거래계약서/세금계산서
* 사업실적 서류 **또는** 임대차계약서/홈페이지/사업장 사진

즉, `required_document_groups` 개념을 둬서
“이 그룹에서 1개 이상” 또는 “이 그룹 전체 필요” 같은 표현이 가능해야 한다.

---

## 19. 접수 차단 규칙 예시

다음은 코드/룰로 구현해야 한다.

* 사업자 상태가 휴업/폐업이면 `BLOCKED`
* 공동대표 공동행사 필요인데 관련 증빙 없으면 `BLOCKED`
* 대리인 신청인데 위임장 없으면 `BLOCKED`
* 실제소유자 확인 불가면 최소 `ESCALATION_REQUIRED`
* 외국법인은 기본 `APPROVAL_PENDING`
* 상품별 추가서류 누락이면 해당 상품만 `BLOCKED`
* 법인명/대표자명 불일치 시 `NEEDS_SUPPLEMENT` 또는 `BLOCKED`
* 고위험 플래그 존재 시 일반 직원이 접수완료 처리 불가

---

## 20. 구현 우선순위

### Phase 1

* 기본 입력 폼
* 케이스 자동 분류
* 서류 리스트 출력
* 접수 차단 규칙
* 감사 로그
* 관리자 기본 룰 관리

### Phase 2

* 첨부문서 메타관리
* 승인 워크플로우
* 정책 버전 관리
* 리포트/통계
* 케이스별 체크리스트 PDF 출력

### Phase 3

* 내부 시스템 연계
* 외부 상태 조회 API 연계
* OCR/문서 자동 분류
* 고급 심사 대시보드

---

## 21. 초기 더미 데이터도 함께 만들어라

반드시 아래를 seed로 넣는다.

* 문서유형 30개 이상
* 케이스유형 14개 이상
* 예외태그 10개 이상
* 룰 25개 이상
* 샘플 법인 신청 20건 이상
* 테스트 사용자 역할 3종 이상

---

## 22. 최종 목표

최종적으로 이 시스템은 직원이 아래처럼 사용할 수 있어야 한다.

* 사업자번호 입력
* 고객유형, 신청자유형, 계좌유형 선택
* 실제소유자/거래목적/위험도 입력
* 즉시 결과 확인:

  * 케이스 코드
  * 필수서류
  * 조건부/대체 가능 서류
  * 예외 플래그
  * 접수 가능 여부
  * 승인 필요 여부
  * 판정 사유

즉, 직원이 “이 법인은 어떤 서류를 받아야 하지?”를 묻는 것이 아니라
시스템이 “이 법인은 **이 케이스**이므로 **이 서류 묶음**이 필요하고, **이 예외** 때문에 승인까지 받아야 한다”고 말해주는 수준으로 만든다.

---

## 23. 구현 시작 지시

위 요구사항을 기준으로 다음 순서로 작업하라.

1. 데이터 모델 설계
2. 문서유형/케이스유형/룰 스키마 설계
3. seed 데이터 작성
4. 룰 엔진 구현
5. 직원용 입력/결과 화면 구현
6. 관리자용 룰 관리 화면 구현
7. 차단/승인 워크플로우 구현
8. 테스트 코드 작성
9. README 및 운영 문서 작성

작업 중 절대로 규칙을 하드코딩하지 말고,
정책 변경이 잦은 업무라는 전제로 **설정 기반 구조**로 구현하라.